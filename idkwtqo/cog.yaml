build:
  gpu: true
  system_packages:
    - "libgl1-mesa-glx"
    - "libegl1-mesa-dev"
    - "libglib2.0-0"
    - "ffmpeg"
    - "libglvnd0"
    - "libgl1"
    - "libglx0"
    - "libegl1"
    - "libgles2"
    - "libglvnd-dev"
    - "libgl1-mesa-dev"
    - "libegl1-mesa-dev"
    - "libgles2-mesa-dev"
    - "libsm6"
    - "libxext6"
    - "build-essential"
  python_version: "3.11"
  python_packages:
    - "pillow"
    - "torch"
    - "diffusers"
    - "transformers"
    - "openai"
    - "ipython==7.30.1"
    - "numpy"
    - "torch"
    - "torchvision"
    - "dataclasses"
    - "opencv-python"
    - "imageio"
    - "ftfy"
    - "regex"
    - "tqdm"
    - "timm"
    - "fasttext"
    - "scikit-learn"
    - "lvis"
    - "nltk"
    - "tf-centernet"
    - "git+https://github.com/openai/CLIP.git"
  run:
    - python3 -m pip install -U 'git+https://github.com/facebookresearch/detectron2.git@ff53992b1985b63bd3262b5a36167098e3dada02'
    - git clone https://github.com/facebookresearch/Detic.git --recurse-submodules
    - pip install -r Detic/requirements.txt
predict: "predict.py:Predictor"